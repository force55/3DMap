!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).convert=t()}}(function(){function t(t){var e=t.filter(function(t){return!(!t||""==t)});if(e.shift(),e.length%2>0)return!1;for(var r=/^[-+]?(\d+|\d+\.\d*|\d*\.\d+)$/,i=/[A-Za-z]+/,a=e.length/2,n=!0,s=0;s<a;s++)if(r.test(e[s])!=r.test(e[s+a])||i.test(e[s])!=i.test(e[s+a])){n=!1;break}return n}function e(t,e){var r=Math.abs(t-e);return diff=Number(r.toFixed(6)),diff<=1e-5}function r(t){if(t.includes(",")){var r=t.split(",");if(NaN==Number(r[0])||NaN==Number(r[1]))throw new Error("coords are not valid decimals");return e(this.decimalLatitude,Number(r[0]))&&e(this.decimalLongitude,r[1])}throw new Error("coords being tested must be separated by a comma")}var i=/(NORTH|SOUTH|[NS])?[\s]*([+-]?[0-8]?[0-9](?:[\.,]\d{3,}))([\u2022\xba\xb0]?)[\s]*(NORTH|SOUTH|[NS])?[\s]*[,/]?[\s]*(EAST|WEST|[EW])?[\s]*([+-]?[0-1]?[0-9]?[0-9](?:[\.,]\d{3,}))([\u2022\xba\xb0]?)[\s]*(EAST|WEST|[EW])?/i,a=/(NORTH|SOUTH|[NS])?[\ \t]*([+-]?[0-8]?[0-9])[\ \t]*(\.)[\ \t]*([0-5]?[0-9])[\ \t]*(\.)?[\ \t]*((?:[0-5]?[0-9])(?:\.\d{1,3})?)?(NORTH|SOUTH|[NS])?(?:[\ \t]*[,/][\ \t]*|[\ \t]*)(EAST|WEST|[EW])?[\ \t]*([+-]?[0-1]?[0-9]?[0-9])[\ \t]*(\.)[\ \t]*([0-5]?[0-9])[\ \t]*(\.)?[\ \t]*((?:[0-5]?[0-9])(?:\.\d{1,3})?)?(EAST|WEST|[EW])?/i,n=/(NORTH|SOUTH|[NS])?[\ \t]*([+-]?[0-8]?[0-9])[\ \t]*(D(?:EG)?(?:REES)?)[\ \t]*([0-5]?[0-9])[\ \t]*(M(?:IN)?(?:UTES)?)[\ \t]*((?:[0-5]?[0-9])(?:\.\d{1,3})?)?(S(?:EC)?(?:ONDS)?)?[\ \t]*(NORTH|SOUTH|[NS])?(?:[\ \t]*[,/][\ \t]*|[\ \t]*)(EAST|WEST|[EW])?[\ \t]*([+-]?[0-1]?[0-9]?[0-9])[\ \t]*(D(?:EG)?(?:REES)?)[\ \t]*([0-5]?[0-9])[\ \t]*(M(?:IN)?(?:UTES)?)[\ \t]*((?:[0-5]?[0-9])(?:\.\d{1,3})?)?(S(?:EC)?(?:ONDS)?)[\ \t]*(EAST|WEST|[EW])?/i,s=/(NORTH|SOUTH|[NS])?[\ \t]*([+-]?[0-8]?[0-9])[\ \t]*([\u2022\xba\xb0\.:]|D(?:EG)?(?:REES)?)?[\ \t]*,?([0-5]?[0-9](?:\.\d{1,})?)?[\ \t]*(['\u2032\xb4\u2019\.:]|M(?:IN)?(?:UTES)?)?[\ \t]*,?((?:[0-5]?[0-9])(?:\.\d{1,3})?)?[\ \t]*(''|\u2032\u2032|\u2019\u2019|\xb4\xb4|["\u2033\u201d\.])?[\ \t]*(NORTH|SOUTH|[NS])?(?:[\ \t]*[,/][\ \t]*|[\ \t]*)(EAST|WEST|[EW])?[\ \t]*([+-]?[0-1]?[0-9]?[0-9])[\ \t]*([\u2022\xba\xb0\.:]|D(?:EG)?(?:REES)?)?[\ \t]*,?([0-5]?[0-9](?:\.\d{1,})?)?[\ \t]*(['\u2032\xb4\u2019\.:]|M(?:IN)?(?:UTES)?)?[\ \t]*,?((?:[0-5]?[0-9])(?:\.\d{1,3})?)?[\ \t]*(''|\u2032\u2032|\xb4\xb4|\u2019\u2019|["\u2033\u201d\.])?[\ \t]*(EAST|WEST|[EW])?/i;return function(e,o){o||(o=5),e=e.replace(/\s\s+/g," ").trim();var d=null,u=null,f="",l="",E=[],S=!1;if(i.test(e)){if(!(S=t(E=i.exec(e))))throw new Error("invalid decimal coordinate format");d=E[2],u=E[6],d.includes(",")&&d.replace(",","."),u.includes(",")&&u.replace(",","."),E[1]?(f=E[1],l=E[5]):E[4]&&(f=E[4],l=E[8])}else if(a.test(e)){if(!(S=t(E=a.exec(e))))throw new Error("invalid DMS coordinates format");d=Math.abs(parseInt(E[2])),E[4]&&(d+=E[4]/60),E[6]&&(d+=E[6]/3600),parseInt(E[2])<0&&(d*=-1),u=Math.abs(parseInt(E[9])),E[11]&&(u+=E[11]/60),E[13]&&(u+=E[13]/3600),parseInt(E[9])<0&&(u*=-1),E[1]?(f=E[1],l=E[8]):E[7]&&(f=E[7],l=E[14])}else if(n.test(e)){if(!(S=t(E=n.exec(e))))throw new Error("invalid DMS coordinates format");d=Math.abs(parseInt(E[2])),E[4]&&(d+=E[4]/60,E[3]||(E[3]=" ")),E[6]&&(d+=E[6]/3600,E[5]||(E[5]=" ")),parseInt(E[2])<0&&(d*=-1),u=Math.abs(parseInt(E[10])),E[12]&&(u+=E[12]/60,E[11]||(E[11]=" ")),E[14]&&(u+=E[14]/3600,E[13]||(E[13]=" ")),parseInt(E[10])<0&&(u*=-1),E[1]?(f=E[1],l=E[9]):E[8]&&(f=E[8],l=E[16])}else if(s.test(e)){if(!(S=t(E=s.exec(e))))throw new Error("invalid coordinates format");d=Math.abs(parseInt(E[2])),E[4]&&(d+=E[4]/60,E[3]||(E[3]=" ")),E[6]&&(d+=E[6]/3600,E[5]||(E[5]=" ")),parseInt(E[2])<0&&(d*=-1),u=Math.abs(parseInt(E[10])),E[12]&&(u+=E[12]/60,E[11]||(E[11]=" ")),E[14]&&(u+=E[14]/3600,E[13]||(E[13]=" ")),parseInt(E[10])<0&&(u*=-1),E[1]?(f=E[1],l=E[9]):E[8]&&(f=E[8],l=E[16])}if(Math.abs(u)>=180)throw new Error("invalid longitude value");if(S){var b,c,N=/S|SOUTH/i;N.test(f)&&d>0&&(d*=-1),(N=/W|WEST/i).test(l)&&u>0&&(u*=-1);var T=e.match(/[,/\u0020]/g);if(null==T){var m=Math.floor(e.length/2);b=e.substring(0,m).trim(),c=e.substring(m).trim()}else{var h=0;if(0==(m=T.length%2==1?Math.floor(T.length/2):T.length/2-1))h=e.indexOf(T[0]),b=e.substring(0,h).trim(),c=e.substring(h+1).trim();else{for(var p=0,x=0;p<=m;)x=(h=e.indexOf(T[p],x))+1,p++;b=e.substring(0,h).trim(),c=e.substring(h+1).trim()}}return isNaN(d)&&d.includes(",")&&(d=d.replace(",",".")),d=Number(Number(d).toFixed(o)),isNaN(u)&&u.includes(",")&&(u=u.replace(",",".")),{verbatimCoordinates:e,verbatimLatitude:b,verbatimLongitude:c,decimalLatitude:d,decimalLongitude:u=Number(Number(u).toFixed(o)),decimalCoordinates:`${d},${u}`,closeEnough:r}}throw new Error("coordinates pattern match failed")}});